設計書

# ユースケース
* 全体の当番表
    * 一定期間(仮に3ヶ月とする)の当番表がでる
    * 次の当番がいつで、誰なのか
* 個人の当番表
    * 一定期間(仮に3ヶ月とする)の自分の当番表がでる
* 管理者(BASIC認証)
    * メンバーの管理(追加・更新・削除・順番の入れ替え)
    * 収集日のスケジュール設定(毎月第xx曜日 等)
    * 次の当番表の確定処理(仮に3ヶ月分を出力する)
        * 次の当番のメンバーの設定

# 実装工程
* メンバー管理、スケジュール管理の実装
* 当番表の計算 全体と個人(先頭のメンバーは仮に決められるようにする)
    * Javaのコードを移植する
        * 年月を指定してdate型を取得できるようにする
        * date型から曜日がわかる
        * date型にn日、n月、n年足した日がわかる
* 当番表を確定させてDBに入れる処理(次の先頭メンバーも保存する)
    * 現在の年
    * 現在の月
    * 現在の先頭のメンバー
* 確定済みの当番表を表示 全体と個人


ラジオボタンで曜日を7種
第 5種

いらないかも、java移植してから考える
この設定のテーブルを作る
* 基準月の年
* 基準月の月
* 基準月の先頭メンバー

この設定を元に当番表の割当を計算




confに追加
* なにのゴミの日(燃えるゴミ or 燃えないゴミ)

* TMember に先頭フラグを追加する 一人だけ
* 当番表作成時に先頭から始まるようにする


ユースケースの話(使い勝手の話)
* ルールベースで自動でスケジュール表を作って、そのスケジュール表をDBに入れる
* DBに入れたスケジュール表の祝日等で変更になった箇所だけ修正できるようにする

仕様の話(つくりの話)
* 手動ベース
    * スケジュール表を手動で管理する仕組みを作る
    * ルールベースのスケジュール表出力ロジックを使ってスケジュール表作成を一部自動化する

* 差分ベース
    * 基本的にはルールベースのスケジュール表ロジックを使ってスケジュール表を表示する
    * ルールベースと異なる部分の日にちだけ追加、更新、削除できるようにする

    * イレギュラー当番日
        * 取り消し 日付で指定
        * 設定 日付で指定

* 当番日設定
    * 曜日・週 指定 ...TWeeklyScheduleConf
    * 日付 指定    ...TDailyScheduleConf
        * 追加差分
        * 打消差分
    -> マージする

日付指定テーブル
* 差分種別(追加差分 or 打消差分 なのか)
* 日付
* ゴミの種類


TFirstMember に行がある、且つ、そのIDがTMembersにあればそのIDを返す
それ以外の時はTMembersをorder順に並べた先頭を返す

↓

idが
[]じゃない、且つ、そのidがTMembersにあればそのidを返す
それ以外の時はTMembersをorder順に並べた先頭を返す

SELECT id FROM TFirstMember;

insert into TFirstMember (id) values(3);

// 3 -> 100
update TFirstMember set id=100
// 100 -> 3
update TFirstMember set id=3

delete from TFirstMember where id=3;



# 名前
* ゴミ収集場所準備当番
* メンバー ...ゴミ収集場所の準備作業を担当するかもしれない人たち
* ゴミ収集日カレンダー
    * 曜日ベースの設定
    * 日付ベースの設定
    * この日のゴミ種別
        * 曜日ベース
        * 日付ベース
        * 計算されたもの

# ToDo
* 日付を日本語混じりの形式じゃなく、ミリ秒で保存するようにする
* カレンダーに表示するものも「曜日毎の設定と日毎の設定」をマージしたものを使うようにする
    * ある日のデータを元にある期間のデータを作るようにする
* 一般的な関数をグローバルに切り出す
* 1年の中のある基準日 -> 4/1がいいかも？FirstMemberのテーブルに持つのもありかも？ -> やってみて判断する

* 1日分とn日分のデータを取得できるようにするのを画面のことは考えずにロジックだけ組んで試したみる